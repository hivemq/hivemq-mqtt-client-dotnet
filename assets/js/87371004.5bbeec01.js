"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[7557],{832(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"how-to/connect-with-auth","title":"Connect with Username/Password Authentication","description":"Connect securely to an MQTT broker using basic authentication credentials.","source":"@site/docs/how-to/connect-with-auth.md","sourceDirName":"how-to","slug":"/how-to/connect-with-auth","permalink":"/hivemq-mqtt-client-dotnet/docs/how-to/connect-with-auth","draft":false,"unlisted":false,"editUrl":"https://github.com/hivemq/hivemq-mqtt-client-dotnet/tree/main/Documentation/docs/how-to/connect-with-auth.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"How To Guides","permalink":"/hivemq-mqtt-client-dotnet/docs/category/how-to-guides"},"next":{"title":"Set a Last Will & Testament","permalink":"/hivemq-mqtt-client-dotnet/docs/how-to/set-lwt"}}');var s=t(4848),o=t(8453);const r={sidebar_position:1},a="Connect with Username/Password Authentication",c={},l=[{value:"Basic Example",id:"basic-example",level:2},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Using Environment Variables",id:"using-environment-variables",level:3},{value:"Using Configuration (appsettings.json)",id:"using-configuration-appsettingsjson",level:3},{value:"Handling Authentication Failures",id:"handling-authentication-failures",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"connect-with-usernamepassword-authentication",children:"Connect with Username/Password Authentication"})}),"\n",(0,s.jsx)(n.p,{children:"Connect securely to an MQTT broker using basic authentication credentials."}),"\n",(0,s.jsx)(n.h2,{id:"basic-example",children:"Basic Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'using HiveMQtt.Client;\nusing HiveMQtt.MQTT5.ReasonCodes;\n\nvar options = new HiveMQClientOptionsBuilder()\n    .WithBroker("your-broker.hivemq.cloud")\n    .WithPort(8883)\n    .WithUseTls(true)\n    .WithUserName("my-username")\n    .WithPassword("my-password")\n    .Build();\n\nvar client = new HiveMQClient(options);\nvar connectResult = await client.ConnectAsync().ConfigureAwait(false);\n\nif (connectResult.ReasonCode == ConnAckReasonCode.Success)\n{\n    Console.WriteLine("Connected successfully!");\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Never hardcode credentials in your source code. Use environment variables, configuration files, or a secrets manager."})}),"\n",(0,s.jsx)(n.admonition,{title:"SecureString Support",type:"tip",children:(0,s.jsxs)(n.p,{children:["For enhanced security, use ",(0,s.jsx)(n.code,{children:"SecureString"})," to prevent password exposure in memory. See the ",(0,s.jsx)(n.a,{href:"/docs/security#securestring-for-credentials",children:"Security Best Practices"})," guide for details."]})}),"\n",(0,s.jsx)(n.h3,{id:"using-environment-variables",children:"Using Environment Variables"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'var options = new HiveMQClientOptionsBuilder()\n    .WithBroker(Environment.GetEnvironmentVariable("MQTT_BROKER"))\n    .WithPort(8883)\n    .WithUseTls(true)\n    .WithUserName(Environment.GetEnvironmentVariable("MQTT_USERNAME"))\n    .WithPassword(Environment.GetEnvironmentVariable("MQTT_PASSWORD"))\n    .Build();\n'})}),"\n",(0,s.jsx)(n.h3,{id:"using-configuration-appsettingsjson",children:"Using Configuration (appsettings.json)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// In appsettings.json:\n// {\n//   "Mqtt": {\n//     "Broker": "your-broker.hivemq.cloud",\n//     "Username": "your-username",\n//     "Password": "your-password"\n//   }\n// }\n\nvar mqttConfig = configuration.GetSection("Mqtt");\nvar options = new HiveMQClientOptionsBuilder()\n    .WithBroker(mqttConfig["Broker"])\n    .WithPort(8883)\n    .WithUseTls(true)\n    .WithUserName(mqttConfig["Username"])\n    .WithPassword(mqttConfig["Password"])\n    .Build();\n'})}),"\n",(0,s.jsx)(n.h2,{id:"handling-authentication-failures",children:"Handling Authentication Failures"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'using HiveMQtt.MQTT5.ReasonCodes;\n\nvar connectResult = await client.ConnectAsync().ConfigureAwait(false);\n\nswitch (connectResult.ReasonCode)\n{\n    case ConnAckReasonCode.Success:\n        Console.WriteLine("Connected!");\n        break;\n    case ConnAckReasonCode.BadUserNameOrPassword:\n        Console.WriteLine("Invalid credentials");\n        break;\n    case ConnAckReasonCode.NotAuthorized:\n        Console.WriteLine("Not authorized to connect");\n        break;\n    default:\n        Console.WriteLine($"Connection failed: {connectResult.ReasonCode}");\n        break;\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/security",children:"Security Best Practices"})," - Comprehensive security guide including SecureString usage"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.hivemq.com/blog/mqtt-security-fundamentals-authentication-username-password/",children:"Authentication with Username and Password - MQTT Security Fundamentals"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.hivemq.com/blog/mqtt-security-fundamentals-advanced-authentication-mechanisms/",children:"Advanced Authentication Mechanisms - MQTT Security Fundamentals"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.hivemq.com/hivemq-cloud/authn-authz.html",children:"HiveMQ Cloud - Authentication and Authorization"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/how-to/client-certificates",children:"Client Certificates"})," - Certificate-based authentication"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>r,x:()=>a});var i=t(6540);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[3141],{3166(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>d});const c=JSON.parse('{"id":"reference/automatic_reconnect","title":"Automatic Reconnect","description":"The HiveMQ MQTT client provides automatic reconnection functionality that allows the client to automatically recover from unexpected disconnections. This feature is disabled by default and must be explicitly enabled.","source":"@site/docs/reference/automatic_reconnect.md","sourceDirName":"reference","slug":"/reference/automatic_reconnect","permalink":"/hivemq-mqtt-client-dotnet/docs/reference/automatic_reconnect","draft":false,"unlisted":false,"editUrl":"https://github.com/hivemq/hivemq-mqtt-client-dotnet/tree/main/Documentation/docs/reference/automatic_reconnect.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Reference","permalink":"/hivemq-mqtt-client-dotnet/docs/category/reference"},"next":{"title":"HiveMQClientOptions","permalink":"/hivemq-mqtt-client-dotnet/docs/reference/client_options"}}');var i=t(4848),r=t(8453);const s={sidebar_position:1},o="Automatic Reconnect",l={},d=[{value:"Enabling Automatic Reconnect",id:"enabling-automatic-reconnect",level:2},{value:"Backoff Strategy",id:"backoff-strategy",level:2},{value:"Monitoring Reconnection",id:"monitoring-reconnection",level:2},{value:"Re-subscribing After Reconnect",id:"re-subscribing-after-reconnect",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"See Also",id:"see-also",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"automatic-reconnect",children:"Automatic Reconnect"})}),"\n",(0,i.jsxs)(n.p,{children:["The HiveMQ MQTT client provides automatic reconnection functionality that allows the client to automatically recover from unexpected disconnections. This feature is ",(0,i.jsx)(n.strong,{children:"disabled by default"})," and must be explicitly enabled."]}),"\n",(0,i.jsx)(n.h2,{id:"enabling-automatic-reconnect",children:"Enabling Automatic Reconnect"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'var options = new HiveMQClientOptionsBuilder()\n    .WithBroker("broker.hivemq.com")\n    .WithAutomaticReconnect(true)\n    .Build();\n\nvar client = new HiveMQClient(options);\nawait client.ConnectAsync();\n'})}),"\n",(0,i.jsx)(n.h2,{id:"backoff-strategy",children:"Backoff Strategy"}),"\n",(0,i.jsxs)(n.p,{children:["The automatic reconnect uses an ",(0,i.jsx)(n.strong,{children:"exponential backoff"})," strategy:"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Attempt"}),(0,i.jsx)(n.th,{children:"Delay"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1st"}),(0,i.jsx)(n.td,{children:"5 seconds"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"2nd"}),(0,i.jsx)(n.td,{children:"10 seconds"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"3rd"}),(0,i.jsx)(n.td,{children:"20 seconds"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"4th"}),(0,i.jsx)(n.td,{children:"40 seconds"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"5th+"}),(0,i.jsx)(n.td,{children:"60 seconds (maximum)"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["The client will continue attempting to reconnect ",(0,i.jsx)(n.strong,{children:"indefinitely"})," until successful."]}),"\n",(0,i.jsx)(n.h2,{id:"monitoring-reconnection",children:"Monitoring Reconnection"}),"\n",(0,i.jsx)(n.p,{children:"Use events to track reconnection status:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'var client = new HiveMQClient(options);\n\n// Triggered when reconnected successfully\nclient.AfterConnect += (sender, args) =>\n{\n    Console.WriteLine($"Connected/Reconnected: {args.ConnectResult.ReasonCode}");\n};\n\n// Triggered when disconnected (before reconnect attempts begin)\nclient.AfterDisconnect += (sender, args) =>\n{\n    if (!args.CleanDisconnect)\n    {\n        Console.WriteLine("Unexpected disconnection - reconnection will be attempted");\n    }\n};\n\nawait client.ConnectAsync();\n'})}),"\n",(0,i.jsx)(n.h2,{id:"re-subscribing-after-reconnect",children:"Re-subscribing After Reconnect"}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,i.jsxs)(n.p,{children:["After reconnection, you may need to re-subscribe to topics depending on your session configuration. If using ",(0,i.jsx)(n.code,{children:"CleanStart = true"}),", subscriptions are not preserved across reconnections."]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'client.AfterConnect += async (sender, args) =>\n{\n    // Re-subscribe after reconnection\n    await client.SubscribeAsync("my/topic", QualityOfService.AtLeastOnceDelivery);\n};\n'})}),"\n",(0,i.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Scenario"}),(0,i.jsx)(n.th,{children:"Recommendation"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"IoT devices with unstable networks"}),(0,i.jsx)(n.td,{children:"Enable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Long-running services"}),(0,i.jsx)(n.td,{children:"Enable"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Short-lived connections"}),(0,i.jsx)(n.td,{children:"Usually not needed"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Custom reconnect logic required"}),(0,i.jsx)(n.td,{children:"Disable and implement your own"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/connecting",children:"Connecting to a Broker"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/events",children:"Events"})," - Monitor connection state changes"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/reference/client_options_builder",children:"HiveMQClientOptionsBuilder Reference"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453(e,n,t){t.d(n,{R:()=>s,x:()=>o});var c=t(6540);const i={},r=c.createContext(i);function s(e){const n=c.useContext(r);return c.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),c.createElement(r.Provider,{value:n},e.children)}}}]);